$().ready(function () {    $('#menuTree').on("changed.jstree", function (e, data) {        // console.log("selected:"+data.changed.selected); // newly selected        // console.log("deselected"+data.changed.deselected); // newly deselected    }).jstree({        'core': {            "animation" : 0,            "check_callback" : true,            "themes" : {                "theme" : "default",                "dots" : true            },            'data': JSON.parse(menuTreeData)        },        "types":{            "#" : {                "max_children" : 1,                "max_depth" : 4,                "valid_children" : ["root"]            }        },        "checkbox" : {            "keep_selected_style" : true,            "three_state":true,            "tie_selection":true        },        "plugins" : [            "checkbox",            "changed"        ]    });  var departmentObj = {    "updateDepartment":function (menuList) {      var param = {};      param["parentDepartmentId"] = $("#parentDepartmentId").val();      param["name"] = $("#name").val();      param["departmentPermitDTOList"] = menuList;      param["departmentId"] = $("#departmentId").val();      var ajaxObj = {        url: "/department/updateDepartment",        param: JSON.stringify(param),        method: "POST",        contentType: "application/json"      };      commonJS.sendAjaxRequest(ajaxObj, function(data) {        if(data.code=="1"){          toastObj.toastMsg(true, true, "toast-top-center", "success", "新增成功");          window.location.href = "/department/departmentManage";        }else{        }      });    }  };    $("#updateDepartmentPermit").on("click",function () {/*提交菜单受权信息*/      var name = $("#name").val();      if(""==name){        toastObj.toastMsg(true, true, "toast-top-center", "warning", "请填写部门名称");        return;      }      var menuTree = $('#menuTree').jstree().get_checked(true);      if(menuTree.length<1) {          toastObj.toastMsg(true, true, "toast-top-center", "warning", "未选择任务菜单权限");          return;      }      var menuList = [];      $(menuTree).each(function (index,value) {          var param = {};          param["permitId"] = value.id;          menuList.push(param);          if("#"!==value.parent){            var parentParam = {};            parentParam["permitId"] = value.parent;            menuList.push(parentParam);          }      });      departmentObj.updateDepartment(menuList);    });});